import streamlit as st
import pandas as pd

def main():
    # ุถุจุท ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ
    st.set_page_config(
        page_title="ุฑุญูุฉ ุงูุชุฎุฑุฌ",
        layout="centered"  # ูุถุจุท ุงููุญุชูู ูู ุงูููุชุตู
    )
    
    # ููุฏูุฉ ุงูุชุทุจูู ูุน ุชูุณูู HTML
    st.markdown("""
    <h1 style='text-align: center;'>๐ ุฑุญูุฉ ุงูุชุฎุฑุฌ ๐</h1>
    <div style='text-align: center; font-size:18px; margin-top: 20px;'>
        <p><strong>ุจุฏุงูุฉ ุงูุฑุญูุฉ โ ูุญุธุฉ ุงูุชุฎุฑุฌ:</strong></p>
        <p>
            ุจุนุฏ ูุณูุฑุฉ ุฃูุซุฑ ูู ูกูข ุนุงููุง ูููุฆุฉ ุจุงูุฏุฑุงุณุฉ ูุงูุงุฎุชุจุงุฑุงุชุ ุฌุงุก ุงูููู ุงูููุชุธุฑ ุงูุฐู ูุญุชูู ููู 
            ุนุฏุฏ ูุจูุฑ ูู ุฎุฑูุฌู ุงูุฌุงูุนุงุช ุจุชุฎุฑุฌูู. ูู ูุฐู ุงููุญุธุฉ ุงูุชุงุฑูุฎูุฉุ ูุญูู ูู ุฎุฑูุฌ ุญูููุง ูุจูุฑูุง 
            ูุทููุญูุง ูุง ุญุฏูุฏ ูู. ุจุนุฏ ูุฐุง ุงููููุ ุชุจุฏุฃ ุฑุญูุฉ ุงูุจุญุซ ุนู ูุธููุฉ ุงูุฃุญูุงูุ ูุญููุฉ ุจุชููุนุงุช ูุขูุงู 
            ูุซูุฑุฉ ููุฑุต ุฑุจูุง ุฃูุซุฑ.
        </p>
        <p>ููุน ุฐููุ ุชุธูุฑ ุชุณุงุคูุงุช ุนุฏุฉ ูู ุจุงู ุงูุฎุฑูุฌููุ ูุซู:</p>
        <p>๐ค ูู ุณูุฌุฏ ูุธููุฉ ุฃุญูุงููุง ุฑุบู ุนุฏู ุงูุชูุงููุง ููุฎุจุฑุฉ ุงููุงููุฉุ</p>
        <p>๐ฐ ูู ุณูููู ูุชูุณุท ุงูุฑุงุชุจ ุงูุฐู ุณูุญุตู ุนูููุ</p>
        <p>๐๏ธ ูู ูุฌุจ ุฃู ูุชูุฌู ุฅูู ุงูุนุงุตูุฉ ุฃู ุงููุฏู ุงููุจูุฑุฉ ููุฌุฏ ูุฑุต ุนูู ุฃูุถูุ ุฃู ุฃู ููุทูุชูุง ุชููุฑ ุงููุธุงุฆู ุงูููุงุณุจุฉุ</p>
        <p>๐ข ูู ุงูุงุฎุชูุงุฑ ุงูุฃูุถู ูู ุงูุนูู ูู ุงููุทุงุน ุงูุฎุงุต ุฃู ุงูุญููููุ</p>
        <p>
            ุชูู ุงูุชุณุงุคูุงุช ุงูุชู ุชุชุฑุฏุฏ ูู ุฃุฐูุงู ุงููุซูุฑูู ุจุนุฏ ุงูุชุฎุฑุฌ ุชุณุชุฏุนู ุฅุฌุงุจุงุช ูุงุถุญุฉ ูุนูููุฉ.
            ููุงุ ูุฏุนููู ูุงุณุชูุดุงู ููุตุฉ "ุฌุฏุงุฑุงุช" ุงููุนุฑููุฉุ ุญูุซ ูุนุฑุถ ููู ุงูุจูุงูุงุช ูุงูุฅุญุตุงุฆูุงุช ุฏูู ููุณูุฉ 
            ุฃู ุชูุธูุฑุ ูููุฏู ููู ุฑุคู ููุถูุนูุฉ ุชุณุงุนุฏ ูู ุฑุณู ููุงูุญ ุงููุณุชูุจู ุงููููู ุจุซูุฉ ููุงูุนูุฉ.
        </p>
    </div>
    """, unsafe_allow_html=True)
    
    # ููุฑุฉ "ุงูุชุญุฏูุงุช ุงูุฃูููุฉ โ ููุงุฌูุฉ ุณูู ุงูุนูู"
    st.markdown("""
    <div style='text-align: center; font-size:18px; margin-top: 40px;'>
        <p><strong>ุงูุชุญุฏูุงุช ุงูุฃูููุฉ โ ููุงุฌูุฉ ุณูู ุงูุนูู:</strong></p>
        <p>
            ูุน ุจุฏุงูุฉ ุจุญุซูู ุนู ูุฑุต ุงูุนููุ ููุงุฌู ุงูุฎุฑูุฌูู ูุงูุนุงู ูุฎุชููุงู ุนู ุฃูุงูููู ุงูุฌุงูุนูุฉ.
            ุชูุจุฑุฒ ุงูุจูุงูุงุช ูุนุฏูุงุช ุงูุชูุธูู ููู ุชุฎุตุตุ ุญูุซ ูุธูุฑ ุฃู ุจุนุถ ุงูุชุฎุตุตุงุช ุชุญุธู ุจูุฑุต ุนูู ูููุฑุฉุ
            ุจูููุง ุชูุงุฌู ุฃุฎุฑู ุตุนูุจุฉ ุฃูุจุฑ ูู ุฏุฎูู ุณูู ุงูุนูู. ููุง ุชุจุฏุฃ ุงููุตุฉ ุงูุญููููุฉุ ุฅุฐ ูุชุฌูู
            ุงููุงุฑู ุจูู ุงูุชููุนุงุช ูุงููุงูุน.
        </p>
    </div>
    """, unsafe_allow_html=True)
    
    # ูุญุงููุฉ ูุฑุงุกุฉ ุงูููู "cleaned_jadarat.csv"
    try:
        df = pd.read_csv("cleaned_jadarat.csv")
        st.success("ุชู ุชุญููู ููู cleaned_jadarat.csv ุจูุฌุงุญ!")
    except Exception as e:
        st.error(f"ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูููู: {e}")
        return

    # ุงูุชุฃูุฏ ูู ูุฌูุฏ ุนููุฏ "JobTitle" ูู ุงูุฏุงุชุง ุณูุช
    if "job_title" not in df.columns:
        st.error("ุนููุฏ 'job_title' ุบูุฑ ููุฌูุฏ ูู ุงูุฏุงุชุง ุณูุช.")
        return

    # ุฅูุดุงุก ุชูุฑุงุฑุงุช ุงููุธุงุฆู ูุนุฏุฏูุง
    job_counts = df["job_title"].value_counts()
    
    # ุนุฑุถ ูุงุฆูุฉ ููุณุฏูุฉ ุจุงููุธุงุฆู ุงููุฑูุฏุฉ
    st.subheader("ุงุฎุชุฑ ุงููุธููุฉ ููุนุฑูุฉ ูุฏู ุชููุฑูุง ูู ุงูุจูุงูุงุช:")
    selected_job = st.selectbox("ุงููุธุงุฆู ุงููุชุงุญุฉ", job_counts.index)

    # ุนูุฏ ุงุฎุชูุงุฑ ูุธููุฉุ ูุชู ุญุณุงุจ ุนุฏุฏ ุชูุฑุงุฑูุง ููุณุจุชูุง
    count = job_counts[selected_job]
    total = job_counts.sum()
    ratio = (count / total) * 100

    st.write(f"**ุนุฏุฏ ุชููุฑ ูุฐู ุงููุธููุฉ:** {count}")
    st.write("**ูุณุจุฉ ุชููุฑูุง ููุงุฑูุฉ ุจุจููุฉ ุงููุธุงุฆู:** {:.2f}%".format(ratio))

if __name__ == "__main__":
    main()
